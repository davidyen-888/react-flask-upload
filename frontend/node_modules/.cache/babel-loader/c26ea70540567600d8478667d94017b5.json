{"ast":null,"code":"import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = createRenderStep(function () {\n    return runNextFrame = true;\n  });\n  return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  var step = steps[key];\n  acc[key] = function (process, keepAlive, immediate) {\n    if (keepAlive === void 0) {\n      keepAlive = false;\n    }\n    if (immediate === void 0) {\n      immediate = false;\n    }\n    if (!runNextFrame) startLoop();\n    return step.schedule(process, keepAlive, immediate);\n  };\n  return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = function () {\n    return steps[key].process(frame);\n  };\n  return acc;\n}, {});\nvar processStep = function (stepId) {\n  return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n  runNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n  if (runNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\nvar startLoop = function () {\n  runNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n  return frame;\n};\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };","map":{"version":3,"names":["onNextFrame","defaultTimestep","createRenderStep","maxElapsed","useDefaultElapsed","runNextFrame","isProcessing","frame","delta","timestamp","stepsOrder","steps","reduce","acc","key","sync","step","process","keepAlive","immediate","startLoop","schedule","cancelSync","cancel","flushSync","processStep","stepId","processFrame","Math","max","min","forEach","getFrameData"],"sources":["/Users/davidhsieh/Code/react-flask-upload/frontend/node_modules/framesync/dist/es/index.js"],"sourcesContent":["import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\n\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createRenderStep(function () {\n        return runNextFrame = true;\n    });\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!runNextFrame) startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = function () {\n        return steps[key].process(frame);\n    };\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}